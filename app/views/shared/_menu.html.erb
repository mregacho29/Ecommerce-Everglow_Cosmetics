<div class="container">
  <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 border-bottom">
    <!-- Left Side: Search Icon and Shipping & Language Button -->
    <div class="col-md-3 d-flex align-items-center">
      <!-- Shipping & Language Button -->
      <button class="btn btn-outline-dark me-3" id="countrySelector" data-toggle="modal" data-target="#countryModal">
        <i class="bi bi-globe"></i>
      </button>

      <!-- Search Icon -->
      <button class="btn btn-outline-dark ml-1" id="searchToggle">
        <i class="bi bi-search"></i>
      </button>
    </div>

    <!-- Center: Brand Logo -->
    <div class="col-md-6 d-flex justify-content-center align-items-center">
      <%= link_to root_path, class: 'd-inline-flex link-body-emphasis text-decoration-none' do %>
        <img src="/assets/logo.png" alt="Everglow Cosmetics" class="me-2" style="height: 40px;">
      <% end %>
    </div>
    <!-- Right Side: Links and Icons -->
    <div class="col-md-3 text-end">
      <!-- Store Icon -->
      <%= link_to stores_path, class: 'btn btn-outline-dark me-2' do %>
        <i class="bi bi-shop"></i>
      <% end %>

      <!-- Cart Icon -->
      <%= link_to cart_path, class: 'btn btn-outline-dark me-2' do %>
        <i class="bi bi-cart"></i>
      <% end %>

      <!-- Favourite/Love Icon -->
      <%= link_to favourites_path, class: 'btn btn-outline-dark me-2' do %>
        <i class="bi bi-heart"></i>
      <% end %>

      <!-- Sign In/Sign Up Dropdown -->
      <% if user_signed_in? %>
        <div class="btn-group">
          <button class="btn btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-person"></i> <%= current_user.email %>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
          <li><%= link_to 'Logout', destroy_user_session_path, method: :delete, class: 'dropdown-item' %></li>          </ul>
        </div>
      <% else %>
        <div class="btn-group">
          <button class="btn btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-person"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li>
              <button class="dropdown-item" data-bs-toggle="modal" data-bs-target="#signInModal">Sign In</button>
            </li>
            <li>
              <button class="dropdown-item" data-bs-toggle="modal" data-bs-target="#registerModal">Register</button>
            </li>
          </ul>
        </div>
      <% end %>
    </div>
  </header>
</div>



<!-- Include the Sign In Modal -->
<%= render 'shared/modals/sign_in_modal' %>

<!-- Include the Register Modal -->
<%= render 'shared/modals/register_modal' %>

<!-- New Navbar for Categories -->
<div class="container-fluid px-0">
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark w-100">
    <div class="container-fluid justify-content-center">
      <ul class="navbar-nav">
        <li class="nav-item">
          <%= link_to t('categories.all_products'), products_path, class: 'nav-link px-3' %>
        </li>
        <li class="nav-item">
          <%= link_to t('categories.makeup'), products_path(category: 'makeup'), class: 'nav-link px-3' %>
        </li>
        <li class="nav-item">
          <%= link_to t('categories.skincare'), products_path(category: 'skincare'), class: 'nav-link px-3' %>
        </li>
        <li class="nav-item">
          <%= link_to t('categories.pencil'), products_path(category: 'pencil'), class: 'nav-link px-3' %>
        </li>
        <li class="nav-item">
          <%= link_to t('categories.lipsticks'), products_path(category: 'lipsticks'), class: 'nav-link px-3' %>
        </li>
        <li class="nav-item">
          <%= link_to t('categories.liquid'), products_path(category: 'liquid'), class: 'nav-link px-3' %>
        </li>
        <li class="nav-item">
          <%= link_to t('categories.powder'), products_path(category: 'powder'), class: 'nav-link px-3' %>
        </li>

      </ul>
    </div>
  </nav>
</div>

<!-- Hidden Search Bar in the Next Row -->
<div class="container mt-4 d-none search-bar-container" id="searchBarRow">
  <form class="d-flex justify-content-center align-items-center" action="<%= search_path %>" method="get">
    <button class="btn btn-outline-danger mr-3" id="searchClose">
      <i class="bi bi-x"></i>
    </button>
    <input class="form-control me-3 w-50" type="search" name="query" placeholder="Search products..." aria-label="Search">
    <button class="btn btn-outline-dark me-3 mr-2 ml-2" type="submit">Search</button>

  </form>
</div>


<!-- Include the Country and Language Modal -->
<%= render 'shared/modals/country_modal' %>